
/*! File input styled for Bootstrap 3.0
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2015
 * @version 4.2.3
 * Author: Kartik Visweswaran
 */
!function(aH){aH.fn.fileinputLocales = {}, String.prototype.repl = function(b, a){return this.split(b).join(a)}; var aD = function(c){var b, a = document.createElement("div"); return a.innerHTML = "<!--[if IE " + c + "]><i></i><![endif]-->", b = 1 === a.getElementsByTagName("i").length, document.body.appendChild(a), a.parentNode.removeChild(a), b}, at = {data:{}, init:function(d){var c = d.initialPreview, b = d.id; c.length > 0 && !am(c) && (c = c.split(d.initialPreviewDelimiter)), at.data[b] = {content:c, config:d.initialPreviewConfig, tags:d.initialPreviewThumbTags, delimiter:d.initialPreviewDelimiter, template:d.previewGenericTemplate, msg:function(a){return d.getMsgSelected(a)}, initId:d.previewInitId, footer:d.getLayoutTemplate("footer"), isDelete:d.initialPreviewShowDelete, caption:d.initialCaption, actions:function(g, f, e, j, h){return d.renderFileActions(g, f, e, j, h)}}}, fetch:function(a){return at.data[a].content.filter(function(b){return null !== b})}, count:function(b, a){return at.data[b] && at.data[b].content?a?at.data[b].content.length:at.fetch(b).length:0}, get:function(j, t, g){var b, h, f = "init_" + t, u = at.data[j], k = u.config[t], m = u.initId + "-" + f, e = " file-preview-initial"; return g = void 0 === g?!0:g, null === u.content[t]?"":(V(k) || V(k.frameClass) || (e += " " + k.frameClass), b = u.template.repl("{previewId}", m).repl("{frameClass}", e).repl("{fileindex}", f).repl("{content}", u.content[t]).repl("{footer}", at.footer(j, t, g)), u.tags.length && u.tags[t] && (b = ae(b, u.tags[t])), V(k) || V(k.frameAttr) || (h = aH(document.createElement("div")).html(b), h.find(".file-preview-initial").attr(k.frameAttr), b = h.html(), h.remove()), b)}, add:function(d, c, h, f, b){var g, e = aH.extend(!0, {}, at.data[d]); return am(c) || (c = c.split(e.delimiter)), b?(g = e.content.push(c) - 1, e.config[g] = h, e.tags[g] = f):(g = c.length, e.content = c, e.config = h, e.tags = f), at.data[d] = e, g}, set:function(d, c, h, f, b){var g, e = aH.extend(!0, {}, at.data[d]); if (am(c) || (c = c.split(e.delimiter)), b){for (g = 0; g < c.length; g++){e.content.push(c[g])}for (g = 0; g < h.length; g++){e.config.push(h[g])}for (g = 0; g < f.length; g++){e.tags.push(f[g])}} else{e.content = c, e.config = h, e.tags = f}at.data[d] = e}, unset:function(d, c){var b = at.count(d); if (b){if (1 === b){return at.data[d].content = [], void (at.data[d].config = [])}at.data[d].content[c] = null, at.data[d].config[c] = null}}, out:function(g){var d, c = "", h = at.data[g], f = at.count(g, !0); if (0 === f){return{content:"", caption:""}}for (var b = 0; f > b; b++){c += at.get(g, b)}return d = h.msg(at.count(g)), {content:c, caption:d}}, footer:function(m, k, w){var h = at.data[m]; if (w = void 0 === w?!0:w, 0 === h.config.length || V(h.config[k])){return""}var b = h.config[k], j = ab("caption", b)?b.caption:"", g = ab("width", b)?b.width:"auto", y = ab("url", b)?b.url:!1, t = ab("key", b)?b.key:null, v = y === !1 && w, f = h.isDelete?h.actions(!1, !0, v, y, t):"", x = h.footer.repl("{actions}", f); return x.repl("{caption}", j).repl("{width}", g).repl("{indicator}", "").repl("{indicatorTitle}", "")}}, aL = function(b, a){return a = a || 0, "number" == typeof b?b:("string" == typeof b && (b = parseFloat(b)), isNaN(b)?a:b)}, ay = function(){return window.File && window.FileReader}, av = function(){var a = document.createElement("div"); return !aD(9) && (void 0 !== a.draggable || void 0 !== a.ondragstart && void 0 !== a.ondrop)}, aA = function(){return ay() && window.FormData}, ax = function(b, a){b.removeClass(a).addClass(a)}, au = 'style="width:{width};height:{height};"', aI = '      <param name="controller" value="true" />\n      <param name="allowFullScreen" value="true" />\n      <param name="allowScriptAccess" value="always" />\n      <param name="autoPlay" value="false" />\n      <param name="autoStart" value="false" />\n      <param name="quality" value="high" />\n', aJ = '<div class="file-preview-other">\n       {previewFileIcon}\n   </div>', aw = {removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>', removeClass:"btn btn-xs btn-default", removeTitle:"Remove file", uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>', uploadClass:"btn btn-xs btn-default", uploadTitle:"Upload file", indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>', indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign file-icon-large text-success"></i>', indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>', indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>', indicatorNewTitle:"Not uploaded yet", indicatorSuccessTitle:"Uploaded", indicatorErrorTitle:"Upload Error", indicatorLoadingTitle:"Uploading ..."}, ar = '{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>', aG = '{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n', aq = '<div class="file-preview {class}">\n    <div class="close fileinput-remove">&times;</div>\n    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>', aE = '<span class="glyphicon glyphicon-file kv-caption-icon"></span>', az = '<div tabindex="-1" class="form-control file-caption {class}">\n   <span class="file-caption-ellipsis">&hellip;</span>\n   <div class="file-caption-name"></div>\n</div>', aF = '<div id="{id}" class="modal fade">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3 class="modal-title">Detailed Preview <small>{title}</small></h3>\n      </div>\n      <div class="modal-body">\n        <textarea class="form-control" style="font-family:Monaco,Consolas,monospace; height: {height}px;" readonly>{body}</textarea>\n      </div>\n    </div>\n  </div>\n</div>', ap = '<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {percent}%\n     </div>\n</div>', aK = '<div class="file-thumbnail-footer">\n    <div class="file-caption-name">{caption}</div>\n    {actions}\n</div>', ao = '<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload}{delete}{other}    </div>\n    <div class="file-upload-indicator" tabindex="-1" title="{indicatorTitle}">{indicator}</div>\n    <div class="clearfix"></div>\n</div>', ai = '<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}"{dataUrl}{dataKey}>{removeIcon}</button>\n', an = '<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">   {uploadIcon}\n</button>\n', K = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   {content}\n   {footer}\n</div>\n', ag = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n    <object data="{data}" type="{type}" width="{width}" height="{height}">\n       ' + aJ + "\n    </object>\n   {footer}\n</div>", aB = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <img src="{data}" class="file-preview-image" title="{caption}" alt="{caption}" ' + au + ">\n   {footer}\n</div>\n", af = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <div class="file-preview-text" title="{caption}" ' + au + ">\n       {data}\n   </div>\n   {footer}\n</div>", al = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" ' + au + '>\n   <video width="{width}" height="{height}" controls>\n       <source src="{data}" type="{type}">\n       ' + aJ + "\n   </video>\n   {footer}\n</div>\n", ad = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" ' + au + '>\n   <audio controls>\n       <source src="{data}" type="{type}">\n       ' + aJ + "\n   </audio>\n   {footer}\n</div>", ah = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" ' + au + '>\n   <object type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n' + aI + "       " + aJ + "\n   </object>\n   {footer}\n</div>\n", X = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" ' + au + '>\n   <object data="{data}" type="{type}" width="{width}" height="{height}">\n       <param name="movie" value="{caption}" />\n' + aI + "         " + aJ + "\n   </object>\n   {footer}\n</div>", Q = '<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" ' + au + ">\n   " + aJ + "\n   {footer}\n</div>", J = {main1:ar, main2:aG, preview:aq, icon:aE, caption:az, modal:aF, progress:ap, footer:aK, actions:ao, actionDelete:ai, actionUpload:an}, aC = {generic:K, html:ag, image:aB, text:af, video:al, audio:ad, flash:ah, object:X, other:Q}, ak = ["image", "html", "text", "video", "audio", "flash", "object"], ac = {image:{width:"auto", height:"160px"}, html:{width:"213px", height:"160px"}, text:{width:"160px", height:"160px"}, video:{width:"213px", height:"160px"}, audio:{width:"213px", height:"80px"}, flash:{width:"213px", height:"160px"}, object:{width:"160px", height:"160px"}, other:{width:"160px", height:"160px"}}, Y = {image:function(b, a){return void 0 !== b?b.match("image.*"):a.match(/\.(gif|png|jpe?g)$/i)}, html:function(b, a){return void 0 !== b?"text/html" === b:a.match(/\.(htm|html)$/i)}, text:function(b, a){return void 0 !== b && b.match("text.*") || a.match(/\.(txt|md|csv|nfo|php|ini)$/i)}, video:function(b, a){return void 0 !== b && b.match(/\.video\/(ogg|mp4|webm)$/i) || a.match(/\.(og?|mp4|webm)$/i)}, audio:function(b, a){return void 0 !== b && b.match(/\.audio\/(ogg|mp3|wav)$/i) || a.match(/\.(ogg|mp3|wav)$/i)}, flash:function(b, a){return void 0 !== b && "application/x-shockwave-flash" === b || a.match(/\.(swf)$/i)}, object:function(){return !0}, other:function(){return !0}}, V = function(b, a){return null === b || void 0 === b || 0 === b.length || a && "" === aH.trim(b)}, am = function(a){return Array.isArray(a) || "[object Array]" === Object.prototype.toString.call(a)}, ab = function(b, a){return"object" == typeof a && b in a}, aa = function(d, c, b){return V(d) || V(d[c])?b:aH(d[c])}, aj = function(){return Math.round((new Date).getTime() + 100 * Math.random())}, q = function(a){return String(a).repl("&", "&amp;").repl('"', "&quot;").repl("'", "&#39;").repl("<", "&lt;").repl(">", "&gt;")}, ae = function(d, c){var b = d; return c = c || {}, aH.each(c, function(f, a){"function" == typeof a && (a = a()), b = b.repl(f, a)}), b}, G = window.URL || window.webkitURL, aM = function(c, b){var d = this; d.$element = aH(c), d.validate() && (d.isPreviewable = ay(), d.isIE9 = aD(9), d.isIE10 = aD(10), d.isPreviewable || d.isIE9?(d.init(b), d.listen()):d.$element.removeClass("file-loading"))}; aM.prototype = {constructor:aM, validate:function(){var b, a = this; return"file" === a.$element.attr("type")?!0:(b = '<div class="help-block alert alert-warning"><h4>Invalid Input Type</h4>You must set an input <code>type = file</code> for <b>bootstrap-fileinput</b> plugin to initialize.</div>', a.$element.after(b), !1)}, init:function(a){var e, b = this, c = b.$element; aH.each(a, function(f, d){b[f] = "maxFileCount" === f || "maxFileSize" === f?aL(d):d}), b.fileInputCleared = !1, b.fileBatchCompleted = !0, V(b.allowedPreviewTypes) && (b.allowedPreviewTypes = ak), b.isPreviewable || (b.showPreview = !1), b.uploadFileAttr = V(c.attr("name"))?"file_data":c.attr("name"), b.reader = null, b.formdata = {}, b.filestack = [], b.ajaxRequests = [], b.isError = !1, b.ajaxAborted = !1, b.dropZoneEnabled = av() && b.dropZoneEnabled, b.isDisabled = b.$element.attr("disabled") || b.$element.attr("readonly"), b.isUploadable = aA() && !V(b.uploadUrl), b.slug = "function" == typeof a.slugCallback?a.slugCallback:b.slugDefault, b.mainTemplate = b.getLayoutTemplate(b.showCaption?"main1":"main2"), b.captionTemplate = b.getLayoutTemplate("caption"), b.previewGenericTemplate = b.getPreviewTemplate("generic"), V(b.$element.attr("id")) && b.$element.attr("id", aj()), void 0 === b.$container?b.$container = b.createContainer():b.refreshContainer(), b.$progress = b.$container.find(".kv-upload-progress"), b.$btnUpload = b.$container.find(".kv-fileinput-upload"), b.$captionContainer = aa(a, "elCaptionContainer", b.$container.find(".file-caption")), b.$caption = aa(a, "elCaptionText", b.$container.find(".file-caption-name")), b.$previewContainer = aa(a, "elPreviewContainer", b.$container.find(".file-preview")), b.$preview = aa(a, "elPreviewImage", b.$container.find(".file-preview-thumbnails")), b.$previewStatus = aa(a, "elPreviewStatus", b.$container.find(".file-preview-status")), b.$errorContainer = aa(a, "elErrorContainer", b.$previewContainer.find(".kv-fileinput-error")), V(b.msgErrorClass) || ax(b.$errorContainer, b.msgErrorClass), b.$errorContainer.hide(), b.fileActionSettings = aH.extend(aw, a.fileActionSettings), b.previewInitId = "preview-" + aj(), b.id = b.$element.attr("id"), at.init(b), b.initPreview(!0), b.initPreviewDeletes(), b.options = a, b.setFileDropZoneTitle(), b.uploadCount = 0, b.uploadPercent = 0, b.$element.removeClass("file-loading"), e = b.getLayoutTemplate("progress"), b.progressTemplate = e.replace("{class}", b.progressClass), b.progressCompleteTemplate = e.replace("{class}", b.progressCompleteClass), b.setEllipsis()}, parseError:function(e, d, c){var h = this, f = aH.trim(d + ""), b = "." === f.slice( - 1)?"":".", g = void 0 !== e.responseJSON && void 0 !== e.responseJSON.error?e.responseJSON.error:e.responseText; return h.showAjaxErrorDetails?(g = aH.trim(g.replace(/\n\s*\n/g, "\n")), g = g.length > 0?"<pre>" + g + "</pre>":"", f += b + g):f += b, c?"<b>" + c + ": </b>" + e:f}, raise:function(d, c){var b = this, e = aH.Event(d); if (void 0 !== c?b.$element.trigger(e, c):b.$element.trigger(e), !e.result){return e.result}switch (d){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break; default:b.ajaxAborted = e.result}return !0}, getLayoutTemplate:function(c){var b = this, a = ab(c, b.layoutTemplates)?b.layoutTemplates[c]:J[c]; return V(b.customLayoutTags)?a:ae(a, b.customLayoutTags)}, getPreviewTemplate:function(c){var b = this, a = ab(c, b.previewTemplates)?b.previewTemplates[c]:aC[c]; return a = a.repl("{previewFileIcon}", b.previewFileIcon), V(b.customPreviewTags)?a:ae(a, b.customPreviewTags)}, getOutData:function(f, d, c){var b = this; return f = f || {}, d = d || {}, c = c || b.filestack.slice(0) || {}, {form:b.formdata, files:c, extra:b.getExtraData(), response:d, reader:b.reader, jqXHR:f}}, setEllipsis:function(){var f = this, d = f.$captionContainer, c = f.$caption, b = c.clone().css("height", "auto").hide(); d.parent().before(b), d.removeClass("kv-has-ellipsis"), b.outerWidth() > c.outerWidth() && d.addClass("kv-has-ellipsis"), b.remove()}, listen:function(){var d = this, c = d.$element, b = d.$captionContainer, f = d.$btnFile, e = c.closest("form"); c.on("change", aH.proxy(d.change, d)), aH(window).on("resize", function(){d.setEllipsis()}), f.off("click").on("click", function(){d.raise("filebrowse"), d.isError && !d.isUploadable && d.clear(), b.focus()}), e.off("reset").on("reset", aH.proxy(d.reset, d)), d.$container.off("click").on("click", ".fileinput-remove:not([disabled])", aH.proxy(d.clear, d)).on("click", ".fileinput-cancel", aH.proxy(d.cancel, d)), d.isUploadable && d.dropZoneEnabled && d.showPreview && d.initDragDrop(), d.isUploadable || e.on("submit", aH.proxy(d.submitForm, d)), d.$container.find(".kv-fileinput-upload").off("click").on("click", function(h){var g, j = aH(this), i = !j.hasClass("disabled") && V(j.attr("disabled")); return d.isUploadable?(h.preventDefault(), void (i && d.upload())):void (i && "submit" !== j.attr("type") && (g = j.closest("form"), g.length && g.trigger("submit"), h.preventDefault()))})}, submitForm:function(){var c = this, b = c.$element, a = b.get(0).files; return a && a.length < c.minFileCount && c.minFileCount > 0?(c.noFilesError({}), !1):!c.abort({})}, abort:function(d){var c, b = this; return b.ajaxAborted && "object" == typeof b.ajaxAborted && void 0 !== b.ajaxAborted.message?(c = aH.extend(b.getOutData(), d), c.abortData = b.ajaxAborted.data || {}, c.abortMessage = b.ajaxAborted.message, b.showUploadError(b.ajaxAborted.message, c, "filecustomerror"), !0):!1}, noFilesError:function(f){var d = this, c = d.minFileCount > 1?d.filePlural:d.fileSingle, b = d.msgFilesTooLess.replace("{n}", d.minFileCount).replace("{files}", c), g = d.$errorContainer; g.html(b), d.isError = !0, d.updateFileDetails(0), g.fadeIn(800), d.raise("fileerror", [f]), d.clearFileInput(), ax(d.$container, "has-error")}, setProgress:function(f){var d = this, c = Math.min(f, 100), b = 100 > c?d.progressTemplate:d.progressCompleteTemplate; V(b) || d.$progress.html(b.repl("{percent}", c))}, upload:function(){var e, d, c, h = this, f = h.getFileStack().length, b = {}, g = !aH.isEmptyObject(h.getExtraData()); if (f < h.minFileCount && h.minFileCount > 0){return void h.noFilesError(b)}if (h.isUploadable && !h.isDisabled && (0 !== f || g)){if (h.resetUpload(), h.$progress.removeClass("hide"), h.uploadCount = 0, h.uploadPercent = 0, h.lock(), h.setProgress(0), 0 === f && g){return void h.uploadExtraOnly()}if (c = h.filestack.length, h.hasInitData = !1, h.uploadAsync && h.showPreview){for (d = h.getOutData(), h.raise("filebatchpreupload", [d]), h.fileBatchCompleted = !1, h.uploadCache = {content:[], config:[], tags:[], append:!0}, e = 0; c > e; e += 1){void 0 !== h.filestack[e] && h.uploadSingle(e, h.filestack, !0)}} else{h.uploadBatch()}}}, lock:function(){var a = this; a.resetErrors(), a.disable(), a.showRemove && ax(a.$container.find(".fileinput-remove"), "hide"), a.showCancel && a.$container.find(".fileinput-cancel").removeClass("hide"), a.raise("filelock", [a.filestack, a.getExtraData()])}, unlock:function(b){var a = this; void 0 === b && (b = !0), a.enable(), a.showCancel && ax(a.$container.find(".fileinput-cancel"), "hide"), a.showRemove && a.$container.find(".fileinput-remove").removeClass("hide"), b && a.resetFileStack(), a.raise("fileunlock", [a.filestack, a.getExtraData()])}, resetFileStack:function(){var d = this, c = 0, b = []; d.getThumbs().each(function(){var f = aH(this), e = f.attr("data-fileindex"), a = d.filestack[e]; - 1 !== e && (void 0 !== a?(b[c] = a, f.attr({id:d.previewInitId + "-" + c, "data-fileindex":c}), c += 1):f.attr({id:"uploaded-" + aj(), "data-fileindex":"-1"}))}), d.filestack = b}, refresh:function(d){var c, b = this, f = b.$element, e = arguments.length?aH.extend(b.options, d):b.options; f.off(), b.init(e), c = b.$container.find(".file-drop-zone"), c.off("dragenter dragover dragleave drop"), aH(document).off("dragenter dragover drop"), b.listen(), b.setFileDropZoneTitle()}, initDragDrop:function(){var b = this, a = b.$container.find(".file-drop-zone"); a.off("dragenter dragover dragleave drop"), aH(document).off("dragenter dragover drop"), a.on("dragenter dragover", function(d){var c = aH.inArray("Files", d.originalEvent.dataTransfer.types) > - 1; return d.stopPropagation(), d.preventDefault(), b.isDisabled || !c?(d.originalEvent.dataTransfer.effectAllowed = "none", void (d.originalEvent.dataTransfer.dropEffect = "none")):void ax(aH(this), "highlighted")}), a.on("dragleave", function(c){c.stopPropagation(), c.preventDefault(), b.isDisabled || aH(this).removeClass("highlighted")}), a.on("drop", function(c){c.preventDefault(), b.isDisabled || V(c.originalEvent.dataTransfer.files) || (b.change(c, "dragdrop"), aH(this).removeClass("highlighted"))}), aH(document).on("dragenter dragover drop", function(c){c.stopPropagation(), c.preventDefault()})}, setFileDropZoneTitle:function(){var b = this, a = b.$container.find(".file-drop-zone"); a.find("." + b.dropZoneTitleClass).remove(), b.isUploadable && b.showPreview && 0 !== a.length && !(b.getFileStack().length > 0) && b.dropZoneEnabled && (0 === a.find(".file-preview-frame").length && a.prepend('<div class="' + b.dropZoneTitleClass + '">' + b.dropZoneTitle + "</div>"), b.$container.removeClass("file-input-new"), ax(b.$container, "file-input-ajax-new"))}, initFileActions:function(){var a = this; a.$preview.find(".kv-file-remove").each(function(){var c, f, d = aH(this), b = d.closest(".file-preview-frame"), e = b.attr("data-fileindex"); d.off("click").on("click", function(){a.cleanMemory(b), b.fadeOut("slow", function(){a.filestack[e] = void 0, a.clearObjects(b), b.remove(); var i = a.getFileStack(!0), h = i.length, g = at.count(a.id); a.clearFileInput(), 0 === h && 0 === g?a.reset():(c = g + h, f = c > 1?a.getMsgSelected(c):i[0]?i[0].name:"", a.setCaption(f))})})}), a.$preview.find(".kv-file-upload").each(function(){var b = aH(this); b.off("click").on("click", function(){var d = b.closest(".file-preview-frame"), c = d.attr("data-fileindex"); a.uploadSingle(c, a.filestack, !1)})})}, getMsgSelected:function(c){var b = this, a = 1 === c?b.fileSingle:b.filePlural; return b.msgSelected.replace("{n}", c).replace("{files}", a)}, renderFileFooter:function(h, f){var d, c, j = this, g = j.fileActionSettings, b = j.getLayoutTemplate("footer"); return j.isUploadable?(d = b.repl("{actions}", j.renderFileActions(!0, !0, !1, !1, !1)), c = d.repl("{caption}", h).repl("{width}", f).repl("{indicator}", g.indicatorNew).repl("{indicatorTitle}", g.indicatorNewTitle)):c = b.repl("{actions}", "").repl("{caption}", h).repl("{width}", f).repl("{indicator}", "").repl("{indicatorTitle}", ""), c = ae(c, j.previewThumbTags)}, renderFileActions:function(w, m, B, z, j){if (!w && !m){return""}var b = this, k = z === !1?"":' data-url="' + z + '"', h = j === !1?"":' data-key="' + j + '"', C = b.getLayoutTemplate("actionDelete"), x = "", y = b.getLayoutTemplate("actions"), g = b.otherActionButtons.repl("{dataKey}", h), A = b.fileActionSettings, v = B?A.removeClass + " disabled":A.removeClass; return C = C.repl("{removeClass}", v).repl("{removeIcon}", A.removeIcon).repl("{removeTitle}", A.removeTitle).repl("{dataUrl}", k).repl("{dataKey}", h), w && (x = b.getLayoutTemplate("actionUpload").repl("{uploadClass}", A.uploadClass).repl("{uploadIcon}", A.uploadIcon).repl("{uploadTitle}", A.uploadTitle)), y.repl("{delete}", C).repl("{upload}", x).repl("{other}", g)}, setThumbStatus:function(h, f){var d = this, c = "indicator" + f, k = c + "Title", g = "file-preview-" + f.toLowerCase(), b = h.find(".file-upload-indicator"), j = d.fileActionSettings; h.removeClass("file-preview-success file-preview-error file-preview-loading"), b.html(j[c]), b.attr("title", j[k]), h.addClass(g)}, clearPreview:function(){var b = this, a = b.$preview.find(b.showUploadedThumbs?".file-preview-frame:not(.file-preview-success)":".file-preview-frame"); a.remove(), b.$preview.find(".file-preview-frame").length && b.showPreview || b.resetUpload()}, initPreview:function(d){var c, b = this, f = b.initialCaption || ""; return at.count(b.id)?(c = at.out(b.id), f = d && b.initialCaption?b.initialCaption:c.caption, b.$preview.html(c.content), b.setCaption(f), void (V(c.content) || b.$container.removeClass("file-input-new"))):(b.clearPreview(), void (d?b.setCaption(f):b.initCaption()))}, initPreviewDeletes:function(){var c = this, b = c.deleteExtraData || {}, d = function(){0 === c.$preview.find(".kv-file-remove").length && (c.reset(), c.initialCaption = "")}; c.$preview.find(".kv-file-remove").each(function(){var a = aH(this), g = a.data("url") || c.deleteUrl, t = a.data("key"); if (!V(g) && void 0 !== t){var k, m, e, o, j = a.closest(".file-preview-frame"), n = at.data[c.id], i = j.data("fileindex"); i = parseInt(i.replace("init_", "")), e = V(n.config) && V(n.config[i])?null:n.config[i], o = V(e) || V(e.extra)?b:e.extra, "function" == typeof o && (o = o()), m = {id:a.attr("id"), key:t, extra:o}, k = aH.extend({url:g, type:"DELETE", dataType:"json", data:aH.extend({key:t}, o), beforeSend:function(f){c.ajaxAborted = !1, c.raise("filepredelete", [t, f, o]), c.ajaxAborted?f.abort():(ax(j, "file-uploading"), ax(a, "disabled"))}, success:function(p, h, f){var s, r; return V(p) || V(p.error)?(at.unset(c.id, i), s = at.count(c.id), r = s > 0?c.getMsgSelected(s):"", c.raise("filedeleted", [t, f, o]), c.setCaption(r), j.removeClass("file-uploading").addClass("file-deleted"), void j.fadeOut("slow", function(){c.clearObjects(j), j.remove(), d(), s || 0 !== c.getFileStack().length || (c.setCaption(""), c.reset())})):(m.jqXHR = f, m.response = p, c.showError(p.error, m, "filedeleteerror"), j.removeClass("file-uploading"), a.removeClass("disabled"), void d())}, error:function(p, h, f){var l = c.parseError(p, f); m.jqXHR = p, m.response = {}, c.showError(l, m, "filedeleteerror"), j.removeClass("file-uploading"), d()}}, c.ajaxDeleteSettings), a.off("click").on("click", function(){aH.ajax(k)})}})}, clearObjects:function(a){a.find("video audio").each(function(){this.pause(), aH(this).remove()}), a.find("img object div").each(function(){aH(this).remove()})}, clearFileInput:function(){var d, c, b, f = this, e = f.$element; V(e.val()) || (f.isIE9 || f.isIE10?(d = e.closest("form"), c = aH(document.createElement("form")), b = aH(document.createElement("div")), e.before(b), d.length?d.after(c):b.after(c), c.append(e).trigger("reset"), b.before(e).remove(), c.remove()):e.val(""), f.fileInputCleared = !0)}, resetUpload:function(){var a = this; a.uploadCache = {content:[], config:[], tags:[], append:!0}, a.uploadCount = 0, a.uploadPercent = 0, a.$btnUpload.removeAttr("disabled"), a.setProgress(0), ax(a.$progress, "hide"), a.resetErrors(!1), a.ajaxAborted = !1, a.ajaxRequests = []}, cancel:function(){var d, c = this, b = c.ajaxRequests, e = b.length; if (e > 0){for (d = 0; e > d; d += 1){b[d].abort()}}c.getThumbs().each(function(){var g = aH(this), f = g.attr("data-fileindex"); g.removeClass("file-uploading"), void 0 !== c.filestack[f] && (g.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"), g.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")), c.unlock()})}, cleanMemory:function(b){var a = b.is("img")?b.attr("src"):b.find("source").attr("src"); G.revokeObjectURL(a)}, hasInitialPreview:function(){var a = this; return !a.overwriteInitial && at.count(a.id)}, clear:function(){var b, a = this; a.$btnUpload.removeAttr("disabled"), a.getThumbs().find("video,audio,img").each(function(){a.cleanMemory(aH(this))}), a.resetUpload(), a.filestack = [], a.clearFileInput(), a.resetErrors(!0), a.raise("fileclear"), a.hasInitialPreview()?(a.showFileIcon(), a.resetPreview(), a.setEllipsis(), a.initPreviewDeletes(), a.$container.removeClass("file-input-new")):(a.getThumbs().each(function(){a.clearObjects(aH(this))}), a.$preview.html(""), b = !a.overwriteInitial && a.initialCaption.length > 0?a.initialCaption:"", a.setCaption(b), a.setEllipsis(), a.$caption.attr("title", ""), ax(a.$container, "file-input-new")), 0 === a.$container.find(".file-preview-frame").length && (a.initCaption() || a.$captionContainer.find(".kv-caption-icon").hide(), a.setEllipsis()), a.hideFileIcon(), a.raise("filecleared"), a.$captionContainer.focus(), a.setFileDropZoneTitle()}, resetPreview:function(){var b, a = this; at.count(a.id)?(b = at.out(a.id), a.$preview.html(b.content), a.setCaption(b.caption)):(a.clearPreview(), a.initCaption())}, reset:function(){var a = this; a.resetPreview(), a.setEllipsis(), a.$container.find(".fileinput-filename").text(""), a.raise("filereset"), a.initialPreview.length > 0 && a.$container.removeClass("file-input-new"), a.setFileDropZoneTitle(), a.filestack = [], a.formdata = {}}, disable:function(){var a = this; a.isDisabled = !0, a.raise("filedisabled"), a.$element.attr("disabled", "disabled"), a.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"), a.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").attr("disabled", !0), a.initDragDrop()}, enable:function(){var a = this; a.isDisabled = !1, a.raise("fileenabled"), a.$element.removeAttr("disabled"), a.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"), a.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").removeAttr("disabled"), a.initDragDrop()}, getThumbs:function(a){return a = a || "", this.$preview.find(".file-preview-frame:not(.file-preview-initial)" + a)}, getExtraData:function(){var b = this, a = b.uploadExtraData; return"function" == typeof b.uploadExtraData && (a = b.uploadExtraData()), a}, uploadExtra:function(){var b = this, a = b.getExtraData(); 0 !== a.length && aH.each(a, function(d, c){b.formdata.append(d, c)})}, initXhr:function(c, b){var a = this; return c.upload && c.upload.addEventListener("progress", function(g){var d = 0, h = g.loaded || g.position, f = g.total; g.lengthComputable && (d = Math.ceil(h / f * b)), a.uploadPercent = Math.max(d, a.uploadPercent), a.setProgress(a.uploadPercent)}, !1), c}, ajaxSubmit:function(e, d, c, g){var f, b = this; b.uploadExtra(), f = aH.extend({xhr:function(){var a = aH.ajaxSettings.xhr(); return b.initXhr(a, 98)}, url:b.uploadUrl, type:"POST", dataType:"json", data:b.formdata, cache:!1, processData:!1, contentType:!1, beforeSend:e, success:d, complete:c, error:g}, b.ajaxSettings), b.ajaxRequests.push(aH.ajax(f))}, initUploadSuccess:function(j, t, g){var b, h, f, w, k, m, e, v = this; "object" != typeof j || aH.isEmptyObject(j) || void 0 !== j.initialPreview && j.initialPreview.length > 0 && (v.hasInitData = !0, k = j.initialPreview || [], m = j.initialPreviewConfig || [], e = j.initialPreviewThumbTags || [], b = void 0 === j.append || j.append?!0:!1, v.overwriteInitial = !1, void 0 === t || g?g?(v.uploadCache.content.push(k[0]), v.uploadCache.config.push(m[0]), v.uploadCache.tags.push(e[0]), v.uploadCache.append = b):(at.set(v.id, k, m, e, b), v.initPreview(), v.initPreviewDeletes()):(f = at.add(v.id, k, m[0], e[0], b), h = at.get(v.id, f, !1), w = aH(h).hide(), t.after(w).fadeOut("slow", function(){w.fadeIn("slow").css("display:inline-block"), v.initPreviewDeletes(), v.clearFileInput(), t.remove()})))}, initSuccessThumbs:function(){var a = this; a.getThumbs(".file-preview-success").each(function(){var c = aH(this), b = c.find(".kv-file-remove"); b.removeAttr("disabled").off("click").on("click", function(){var d = a.raise("filesuccessremove", [c.attr("id"), c.data("fileindex")]); a.cleanMemory(c), d !== !1 && c.fadeOut("slow", function(){c.remove(), a.$preview.find(".file-preview-frame").length || a.reset()})})})}, uploadSingle:function(L, U, F){var D, I, A, P, R, E, z, O, t, M = this, H = M.getFileStack().length, N = new FormData, o = M.previewInitId + "-" + L, S = aH("#" + o + ":not(.file-preview-initial)"), k = S.find(".kv-file-upload"), B = S.find(".kv-file-remove"), j = M.filestack.length > 0 || !aH.isEmptyObject(M.uploadExtraData), e = {id:o, index:L}; M.formdata = N, 0 === H || !j || k.hasClass("disabled") || M.abort(e) || (A = function(){var a = M.getThumbs(".file-uploading"); a.length > 0 || M.fileBatchCompleted || (M.fileBatchCompleted = !0, setTimeout(function(){at.set(M.id, M.uploadCache.content, M.uploadCache.config, M.uploadCache.tags, M.uploadCache.append), M.hasInitData && (M.initPreview(), M.initPreviewDeletes()), M.setProgress(100), M.unlock(), M.clearFileInput(), M.raise("filebatchuploadcomplete", [M.filestack, M.getExtraData()])}, 100))}, P = function(){!F || 0 === H || M.uploadPercent >= 100 || (M.uploadCount += 1, I = 80 + Math.ceil(20 * M.uploadCount / H), M.uploadPercent = Math.max(I, M.uploadPercent), M.setProgress(M.uploadPercent), M.initPreviewDeletes())}, R = function(){k.removeAttr("disabled"), B.removeAttr("disabled"), S.removeClass("file-uploading")}, E = function(a){D = M.getOutData(a), S.hasClass("file-preview-success") || (M.setThumbStatus(S, "Loading"), ax(S, "file-uploading")), k.attr("disabled", !0), B.attr("disabled", !0), F || M.lock(), M.raise("filepreupload", [D, o, L]), e = aH.extend(e, D), M.abort(e) && (a.abort(), M.setProgress(100))}, z = function(d, c, b){D = M.getOutData(b, d), e = aH.extend(e, D), setTimeout(function(){V(d) || V(d.error)?(M.setThumbStatus(S, "Success"), k.hide(), M.filestack[L] = void 0, M.raise("fileuploaded", [D, o, L]), M.initUploadSuccess(d, S, F), F || M.resetFileStack()):(M.setThumbStatus(S, "Error"), M.showUploadError(d.error, e))}, 100)}, O = function(){setTimeout(function(){P(), R(), F?A():M.unlock(!1), M.initSuccessThumbs()}, 100)}, t = function(b, c, a){var d = M.parseError(b, a, F?U[L].name:null); M.setThumbStatus(S, "Error"), e = aH.extend(e, M.getOutData(b)), M.showUploadError(d, e)}, N.append(M.uploadFileAttr, U[L]), N.append("file_id", L), M.ajaxSubmit(E, z, O, t))}, uploadBatch:function(){var h, o, m, f, b, g = this, u = g.filestack, j = u.length, k = g.filestack.length > 0 || !aH.isEmptyObject(g.uploadExtraData), e = {}; g.formdata = new FormData, 0 !== j && k && !g.abort(e) && (h = function(){aH.each(u, function(a){g.filestack[a] = void 0}), g.clearFileInput()}, o = function(c){g.lock(); var a = g.getOutData(c); g.showPreview && g.getThumbs().each(function(){var n = aH(this), l = n.find(".kv-file-upload"), d = n.find(".kv-file-remove"); n.hasClass("file-preview-success") || (g.setThumbStatus(n, "Loading"), ax(n, "file-uploading")), l.attr("disabled", !0), d.attr("disabled", !0)}), g.raise("filebatchpreupload", [a]), g.abort(a) && c.abort()}, m = function(d, c, v){var l = g.getOutData(v, d), p = g.getThumbs(), i = V(d.errorkeys)?[]:d.errorkeys; V(d) || V(d.error)?(g.raise("filebatchuploadsuccess", [l]), h(), g.showPreview?(p.each(function(){var n = aH(this), a = n.find(".kv-file-upload"); n.find(".kv-file-upload").hide(), g.setThumbStatus(n, "Success"), n.removeClass("file-uploading"), a.removeAttr("disabled")}), g.initUploadSuccess(d)):g.reset()):(g.showPreview && (p.each(function(){var s = aH(this), r = s.find(".kv-file-remove"), n = s.find(".kv-file-upload"); return s.removeClass("file-uploading"), n.removeAttr("disabled"), r.removeAttr("disabled"), 0 === i.length?void g.setThumbStatus(s, "Error"):void ( - 1 !== aH.inArray(key, i)?g.setThumbStatus(s, "Error"):(s.find(".kv-file-upload").hide(), g.setThumbStatus(s, "Success"), g.filestack[key] = void 0))}), g.initUploadSuccess(d)), g.showUploadError(d.error, l, "filebatchuploaderror"))}, f = function(){g.setProgress(100), g.unlock(), g.initSuccessThumbs(), g.raise("filebatchuploadcomplete", [g.filestack, g.getExtraData()]), g.clearFileInput()}, b = function(l, d, c){var s = g.getOutData(l), p = g.parseError(l, c); g.showUploadError(p, s, "filebatchuploaderror"), g.uploadFileCount = j - 1, g.showPreview && (g.getThumbs().each(function(){var n = aH(this), a = n.attr("data-fileindex"); n.removeClass("file-uploading"), void 0 !== g.filestack[a] && g.setThumbStatus(n, "Error")}), g.getThumbs().removeClass("file-uploading"), g.getThumbs(" .kv-file-upload").removeAttr("disabled"), g.getThumbs(" .kv-file-delete").removeAttr("disabled"))}, aH.each(u, function(c, a){V(u[c]) || g.formdata.append(g.uploadFileAttr, a)}), g.ajaxSubmit(o, m, f, b))}, uploadExtraOnly:function(){var g, d, c, b, h = this, f = {}; h.formdata = new FormData, h.abort(f) || (g = function(j){h.lock(); var a = h.getOutData(j); h.raise("filebatchpreupload", [a]), h.setProgress(50), f.data = a, f.xhr = j, h.abort(f) && (j.abort(), h.setProgress(100))}, d = function(m, l, k){var j = h.getOutData(k, m); V(m) || V(m.error)?(h.raise("filebatchuploadsuccess", [j]), h.clearFileInput(), h.initUploadSuccess(m)):h.showUploadError(m.error, j, "filebatchuploaderror")}, c = function(){h.setProgress(100), h.unlock(), h.raise("filebatchuploadcomplete", [h.filestack, h.getExtraData()]), h.clearFileInput()}, b = function(o, n, m){var k = h.getOutData(o), j = h.parseError(o, m); f.data = k, h.showUploadError(j, k, "filebatchuploaderror")}, h.ajaxSubmit(g, d, c, b))}, hideFileIcon:function(){this.overwriteInitial && this.$captionContainer.find(".kv-caption-icon").hide()}, showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()}, resetErrors:function(c){var b = this, a = b.$errorContainer; b.isError = !1, b.$container.removeClass("has-error"), a.html(""), c?a.fadeOut("slow"):a.hide()}, showFolderError:function(c){var b = this, a = b.$errorContainer; c && (a.html(b.msgFoldersNotAllowed.repl("{n}", c)), a.fadeIn(800), ax(b.$container, "has-error"), b.raise("filefoldererror", [c]))}, showUploadError:function(g, d, c){var b = this, h = b.$errorContainer, f = c || "fileuploaderror"; return 0 === h.find("ul").length?h.html("<ul><li>" + g + "</li></ul>"):h.find("ul").append("<li>" + g + "</li>"), h.fadeIn(800), b.raise(f, [d]), ax(b.$container, "has-error"), !0}, showError:function(g, d, c){var b = this, h = b.$errorContainer, f = c || "fileerror"; return d = d || {}, d.reader = b.reader, h.html(g), h.fadeIn(800), b.raise(f, [d]), b.isUploadable || b.clearFileInput(), ax(b.$container, "has-error"), b.$btnUpload.attr("disabled", !0), !0}, errorHandler:function(f, d){var c = this, b = f.target.error; switch (b.code){case b.NOT_FOUND_ERR:c.showError(c.msgFileNotFound.replace("{name}", d)); break; case b.SECURITY_ERR:c.showError(c.msgFileSecured.replace("{name}", d)); break; case b.NOT_READABLE_ERR:c.showError(c.msgFileNotReadable.replace("{name}", d)); break; case b.ABORT_ERR:c.showError(c.msgFilePreviewAborted.replace("{name}", d)); break; default:c.showError(c.msgFilePreviewError.replace("{name}", d))}}, parseFileType:function(g){var d, c, b, h, f = this; for (h = 0; h < ak.length; h += 1){if (b = ak[h], d = ab(b, f.fileTypeSettings)?f.fileTypeSettings[b]:Y[b], c = d(g.type, g.name)?b:"", !V(c)){return c}}return"other"}, previewDefault:function(h, p, m){if (this.showPreview){var f = this, b = G.createObjectURL(h), g = (aH("#" + p), f.previewSettings.other || ac.other), e = f.renderFileFooter(h.name, g.width), u = f.getPreviewTemplate("other"), j = p.slice(p.lastIndexOf("-") + 1), k = ""; m === !0 && (k = " btn disabled", e += '<div class="file-other-error text-danger"><i class="glyphicon glyphicon-exclamation-sign"></i></div>'), f.$preview.append("\n" + u.repl("{previewId}", p).repl("{frameClass}", k).repl("{fileindex}", j).repl("{caption}", f.slug(h.name)).repl("{width}", g.width).repl("{height}", g.height).repl("{type}", h.type).repl("{data}", b).repl("{footer}", e))}}, previewFile:function(U, P, D, aO, M){if (this.showPreview){var H, O, L, E, W = this, Z = W.parseFileType(P), I = W.slug(P.name), B = W.allowedPreviewTypes, T = W.allowedPreviewMimeTypes, A = W.getPreviewTemplate(Z), R = ab(Z, W.previewSettings)?W.previewSettings[Z]:ac[Z], N = parseInt(W.wrapTextLength, 10), S = W.wrapIndicator, z = B.indexOf(Z) >= 0, aN = V(T) || !V(T) && - 1 !== T.indexOf(P.type), k = W.renderFileFooter(I, R.width), F = "", j = aO.slice(aO.lastIndexOf("-") + 1); z && aN?("text" === Z?(O = q(D.target.result), O.length > N && (L = "text-" + aj(), E = 0.75 * window.innerHeight, F = W.getLayoutTemplate("modal").repl("{id}", L).repl("{title}", I).repl("{height}", E).repl("{body}", O), S = S.repl("{title}", I).repl("{dialog}", "$('#" + L + "').modal('show')"), O = O.substring(0, N - 1) + S), H = A.repl("{previewId}", aO).repl("{caption}", I).repl("{frameClass}", "").repl("{type}", P.type).repl("{width}", R.width).repl("{height}", R.height).repl("{data}", O).repl("{footer}", k).repl("{fileindex}", j) + F):H = A.repl("{previewId}", aO).repl("{caption}", I).repl("{frameClass}", "").repl("{type}", P.type).repl("{data}", M).repl("{width}", R.width).repl("{height}", R.height).repl("{footer}", k).repl("{fileindex}", j), W.$preview.append("\n" + H), W.validateImage(U, aO)):W.previewDefault(P, aO)}}, slugDefault:function(a){return V(a)?"":a.split(/(\\|\/)/g).pop().replace(/[^\w\u00C0-\u017F\-.\\\/ ]+/g, "")}, getFileStack:function(b){var a = this; return a.filestack.filter(function(c){return b?void 0 !== c:void 0 !== c && null !== c})}, readFiles:function(m){function D(M){if (V(j.attr("multiple")) && (C = 1), M >= C){return A.isUploadable && A.filestack.length > 0?A.raise("filebatchselected", [A.getFileStack()]):A.raise("filebatchselected", [m]), g.removeClass("loading"), void E.html("")}var u, L, o, N, n, t, i = B + M, c = e + "-" + i, r = m[M], v = A.slug(r.name), p = (r.size || 0) / 1000, d = "", l = G.createObjectURL(r), s = 0, h = A.allowedFileTypes, f = V(h)?"":h.join(", "), a = A.allowedFileExtensions, H = V(a)?"":a.join(", "); if (V(a) || (d = new RegExp("\\.(" + a.join("|") + ")$", "i")), p = p.toFixed(2), A.maxFileSize > 0 && p > A.maxFileSize){return N = A.msgSizeTooLarge.replace("{name}", v).replace("{size}", p).replace("{maxSize}", A.maxFileSize), void (A.isError = w(N, r, c, M))}if (!V(h) && am(h)){for (o = 0; o < h.length; o += 1){n = h[o], L = x[n], t = void 0 !== L && L(r.type, v), s += V(t)?0:t.length}if (0 === s){return N = A.msgInvalidFileType.replace("{name}", v).replace("{types}", f), void (A.isError = w(N, r, c, M))}}return 0 !== s || V(a) || !am(a) || V(d) || (t = v.match(d), s += V(t)?0:t.length, 0 !== s)?A.showPreview?(b.length > 0 && void 0 !== FileReader?(E.html(y.replace("{index}", M + 1).replace("{files}", C)), g.addClass("loading"), k.onerror = function(F){A.errorHandler(F, v)}, k.onload = function(F){A.previewFile(M, r, F, c, l), A.initFileActions()}, k.onloadend = function(){N = z.replace("{index}", M + 1).replace("{files}", C).replace("{percent}", 50).replace("{name}", v), setTimeout(function(){E.html(N), D(M + 1), A.updateFileDetails(C)}, 100), A.raise("fileloaded", [r, c, M, k])}, k.onprogress = function(O){if (O.lengthComputable){var I = O.loaded / O.total * 100, F = Math.ceil(I); N = z.replace("{index}", M + 1).replace("{files}", C).replace("{percent}", F).replace("{name}", v), setTimeout(function(){E.html(N)}, 100)}}, u = ab("text", x)?x.text:Y.text, u(r.type, v)?k.readAsText(r, A.textEncoding):k.readAsArrayBuffer(r)):(A.previewDefault(r, c), setTimeout(function(){D(M + 1), A.updateFileDetails(C)}, 100), A.raise("fileloaded", [r, c, M, k])), void A.filestack.push(r)):(A.filestack.push(r), setTimeout(D(M + 1), 100), void A.raise("fileloaded", [r, c, M, k])):(N = A.msgInvalidFileExtension.replace("{name}", v).replace("{extensions}", H), void (A.isError = w(N, r, c, M)))}this.reader = new FileReader; var A = this, j = A.$element, b = A.$preview, k = A.reader, g = A.$previewContainer, E = A.$previewStatus, y = A.msgLoading, z = A.msgProgress, e = A.previewInitId, C = m.length, x = A.fileTypeSettings, B = A.filestack.length, w = function(c, i, f, a){var h = aH.extend(A.getOutData({}, {}, m), {id:f, index:a}), d = {id:f, index:a, file:i, files:m}; return A.previewDefault(i, f, !0), A.isUploadable?A.showUploadError(c, h):A.showError(c, d)}; D(0), A.updateFileDetails(C, !1)}, updateFileDetails:function(j){var h = this, m = h.$element, f = h.getFileStack(), b = m.val() || f.length && f[0].name || "", g = h.slug(b), c = h.isUploadable?f.length:j, p = at.count(h.id) + c, k = c > 1?h.getMsgSelected(p):g; h.isError?(h.$previewContainer.removeClass("loading"), h.$previewStatus.html(""), h.$captionContainer.find(".kv-caption-icon").hide()):h.showFileIcon(), h.setCaption(k, h.isError), h.$container.removeClass("file-input-new file-input-ajax-new"), 1 === arguments.length && h.raise("fileselect", [j, g]), at.count(h.id) && h.initPreviewDeletes()}, change:function(y){var E = this, k = E.$element; if (!E.isUploadable && V(k.val()) && E.fileInputCleared){return void (E.fileInputCleared = !1)}E.fileInputCleared = !1; var b, x, j, L, C = E.$preview, D = arguments.length > 1, e = D?y.originalEvent.dataTransfer.files:k.get(0).files, I = V(k.attr("multiple")), B = 0, H = 0, z = E.filestack.length, t = E.isUploadable, A = function(d, c, h, f){var a = aH.extend(E.getOutData({}, {}, e), {id:h, index:f}), g = {id:h, index:f, file:c, files:e}; return E.isUploadable?E.showUploadError(d, a):E.showError(d, g)}; if (E.reader = null, E.resetUpload(), E.hideFileIcon(), E.isUploadable && E.$container.find(".file-drop-zone ." + E.dropZoneTitleClass).remove(), D){for (b = []; e[B]; ){L = e[B], L.type || L.size % 4096 !== 0?b.push(L):H++, B++}} else{b = void 0 === y.target.files?y.target && y.target.value?[{name:y.target.value.replace(/^.+\\/, "")}]:[]:y.target.files}if (V(b) || 0 === b.length){return t || E.clear(), E.showFolderError(H), void E.raise("fileselectnone")}if (E.resetErrors(), j = E.isUploadable?E.getFileStack().length + b.length:b.length, E.maxFileCount > 0 && j > E.maxFileCount){return x = E.msgFilesTooMany.replace("{m}", E.maxFileCount).replace("{n}", j), E.isError = A(x, null, null, null), E.$captionContainer.find(".kv-caption-icon").hide(), E.setCaption("", !0), E.setEllipsis(), void E.$container.removeClass("file-input-new file-input-ajax-new")}if (!t || I && z > 0){if (E.hasInitialPreview()){var F = at.out(E.id); C.html(F.content), E.setCaption(F.caption), E.initPreviewDeletes()} else{E.clearPreview()}I && z > 0 && (E.filestack = [])} else{!t || 0 !== z || at.count(E.id) && !E.overwriteInitial || (E.clearPreview(), E.filestack = [])}E.isPreviewable?E.readFiles(b):E.updateFileDetails(1), E.showFolderError(H)}, validateImage:function(k, j){var v, u, g, b, h = this, f = h.$preview, w = f.find("#" + j), m = "Untitled", p = w.find("img"); p.length && p.on("load", function(){u = w.width(), g = f.width(), u > g && (p.css("width", "100%"), w.css("width", "97%")), b = p.closest(".file-preview-frame").find(".file-caption-name"), b.length && (b.width(p.width()), m = b.text(), b.attr("title", m)), v = {ind:k, id:j}, h.checkDimensions(k, "Small", p, w, m, "Width", v), h.checkDimensions(k, "Small", p, w, m, "Height", v), h.checkDimensions(k, "Large", p, w, m, "Width", v), h.checkDimensions(k, "Large", p, w, m, "Height", v), h.raise("fileimageloaded", [j]), G.revokeObjectURL(p.attr("src"))})}, checkDimensions:function(w, m, B, z, j, b, k){var h, C, x, y, g = this, A = "Small" === m?"min":"max", v = g[A + "Image" + b]; !V(v) && B.length && (x = B[0], C = "Width" === b?x.naturalWidth || x.width:x.naturalHeight || x.height, y = "Small" === m?C >= v:v >= C, y || (h = g["msgImage" + b + m].replace("{name}", j).replace("{size}", v), g.showUploadError(h, k), g.setThumbStatus(z, "Error"), g.filestack[w] = null))}, initCaption:function(){var b = this, a = b.initialCaption || ""; return b.overwriteInitial || V(a)?(b.$caption.html(""), !1):(b.setCaption(a), !0)}, setCaption:function(d, c){var b, f, e = this; if (c){b = aH("<div>" + e.msgValidationError + "</div>").text(), f = '<span class="' + e.msgValidationErrorClass + '">' + e.msgValidationErrorIcon + b + "</span>"} else{if (V(d) || 0 === e.$caption.length){return}b = aH("<div>" + d + "</div>").text(), f = e.getLayoutTemplate("icon") + b}e.$caption.html(f), e.$caption.attr("title", b), e.$captionContainer.find(".file-caption-ellipsis").attr("title", b), e.setEllipsis()}, initBrowse:function(b){var a = this; a.$btnFile = b.find(".btn-file"), a.$btnFile.append(a.$element)}, createContainer:function(){var b = this, a = aH(document.createElement("span")).attr({"class":"file-input file-input-new"}).html(b.renderMain()); return b.$element.before(a), b.initBrowse(a), a}, refreshContainer:function(){var b = this, a = b.$container; a.before(b.$element), a.html(b.renderMain()), b.initBrowse(a)}, renderMain:function(){var f = this, d = f.isUploadable && f.dropZoneEnabled?" file-drop-zone":"", c = f.showPreview?f.getLayoutTemplate("preview").repl("{class}", f.previewClass).repl("{dropClass}", d):"", b = f.isDisabled?f.captionClass + " file-caption-disabled":f.captionClass, g = f.captionTemplate.repl("{class}", b + " kv-fileinput-caption"); return f.mainTemplate.repl("{class}", f.mainClass).repl("{preview}", c).repl("{caption}", g).repl("{upload}", f.renderUpload()).repl("{remove}", f.renderRemove()).repl("{cancel}", f.renderCancel()).repl("{browse}", f.renderBrowse())}, renderBrowse:function(){var c = this, b = c.browseClass + " btn-file", a = ""; return c.isDisabled && (a = " disabled "), '<div class="' + b + '"' + a + "> " + c.browseIcon + c.browseLabel + " </div>"}, renderRemove:function(){var c = this, b = c.removeClass + " fileinput-remove fileinput-remove-button", a = ""; return c.showRemove?(c.isDisabled && (a = " disabled "), '<button type="button" title="' + c.removeTitle + '" class="' + b + '"' + a + ">" + c.removeIcon + c.removeLabel + "</button>"):""}, renderCancel:function(){var b = this, a = b.cancelClass + " fileinput-cancel fileinput-cancel-button"; return b.showCancel?'<button type="button" title="' + b.cancelTitle + '" class="hide ' + a + '">' + b.cancelIcon + b.cancelLabel + "</button>":""}, renderUpload:function(){var f = this, d = f.uploadClass + " kv-fileinput-upload fileinput-upload-button", c = "", b = ""; return f.showUpload?(f.isDisabled && (b = " disabled "), c = !f.isUploadable || f.isDisabled?'<button type="submit" title="' + f.uploadTitle + '"class="' + d + '"' + b + ">" + f.uploadIcon + f.uploadLabel + "</button>":'<a href="' + f.uploadUrl + '" title="' + f.uploadTitle + '" class="' + d + '"' + b + ">" + f.uploadIcon + f.uploadLabel + "</a>"):""}}, aH.fn.fileinput = function(c){if (ay() || aD(9)){var b = Array.apply(null, arguments); return b.shift(), this.each(function(){var d, g = aH(this), e = g.data("fileinput"), a = "object" == typeof c && c, f = a.language || g.data("language") || "en"; e || (d = aH.extend({}, aH.fn.fileinput.defaults), "en" === f || V(aH.fn.fileinputLocales[f]) || (d = aH.extend(d, aH.fn.fileinputLocales[f])), e = new aM(this, aH.extend(d, a, g.data())), g.data("fileinput", e)), "string" == typeof c && e[c].apply(e, b)})}}, aH.fn.fileinput.defaults = {language:"en", showCaption:!0, showPreview:!0, showRemove:!0, showUpload:!0, showCancel:!0, showUploadedThumbs:!0, mainClass:"", previewClass:"", captionClass:"", mainTemplate:null, initialCaption:"", initialPreview:[], initialPreviewDelimiter:"*$$*", initialPreviewConfig:[], initialPreviewThumbTags:[], previewThumbTags:{}, initialPreviewShowDelete:!0, deleteUrl:"", deleteExtraData:{}, overwriteInitial:!0, layoutTemplates:J, previewTemplates:aC, allowedPreviewTypes:ak, allowedPreviewMimeTypes:null, allowedFileTypes:null, allowedFileExtensions:null, customLayoutTags:{}, customPreviewTags:{}, previewSettings:ac, fileTypeSettings:Y, previewFileIcon:'<i class="glyphicon glyphicon-file"></i>', browseIcon:'<i class="glyphicon glyphicon-folder-open"></i> &nbsp;', browseClass:"btn btn-primary", removeIcon:'<i class="glyphicon glyphicon-trash"></i> ', removeClass:"btn btn-default", cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i> ', cancelClass:"btn btn-default", uploadIcon:'<i class="glyphicon glyphicon-upload"></i> ', uploadClass:"btn btn-default", uploadUrl:null, uploadAsync:!0, uploadExtraData:{}, minImageWidth:null, minImageHeight:null, maxImageWidth:null, maxImageHeight:null, maxFileSize:0, minFileCount:0, maxFileCount:0, msgValidationErrorClass:"text-danger", msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ', msgErrorClass:"file-error-message", progressClass:"progress-bar progress-bar-success progress-bar-striped active", progressCompleteClass:"progress-bar progress-bar-success", previewFileType:"image", wrapTextLength:250, wrapIndicator:' <span class="wrap-indicator" title="{title}" onclick="{dialog}">[&hellip;]</span>', elCaptionContainer:null, elCaptionText:null, elPreviewContainer:null, elPreviewImage:null, elPreviewStatus:null, elErrorContainer:null, slugCallback:null, dropZoneEnabled:!0, dropZoneTitleClass:"file-drop-zone-title", fileActionSettings:{}, otherActionButtons:"", textEncoding:"UTF-8", ajaxSettings:{}, ajaxDeleteSettings:{}, showAjaxErrorDetails:!0}, aH.fn.fileinputLocales.en = {fileSingle:"file", filePlural:"files", browseLabel:"Browse &hellip;", removeLabel:"Remove", removeTitle:"Clear selected files", cancelLabel:"Cancel", cancelTitle:"Abort ongoing upload", uploadLabel:"Upload", uploadTitle:"Upload selected files", msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>. Please retry your upload!', msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload. Please retry your upload!", msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>. Please retry your upload!", msgFileNotFound:'File "{name}" not found!', msgFileSecured:'Security restrictions prevent reading the file "{name}".', msgFileNotReadable:'File "{name}" is not readable.', msgFilePreviewAborted:'File preview aborted for "{name}".', msgFilePreviewError:'An error occurred while reading the file "{name}".', msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.', msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.', msgValidationError:"File Upload Error", msgLoading:"Loading file {index} of {files} &hellip;", msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.", msgSelected:"{n} {files} selected", msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.", msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.', msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.', msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.', msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.', dropZoneTitle:"Drag & drop files here &hellip;"}, aH.extend(aH.fn.fileinput.defaults, aH.fn.fileinputLocales.en), aH.fn.fileinput.Constructor = aM, aH(document).ready(function(){var a = aH("input.file[type=file]"); a.length && a.fileinput()})}(window.jQuery);
        /*!
         * FileInput Spanish Translations
         * @see http://github.com/kartik-v/bootstrap-fileinput
         */
                (function(a){a.fn.fileinputLocales.es = {fileSingle:"archivo", filePlural:"archivos", browseLabel:"Examinar &hellip;", removeLabel:"Quitar", removeTitle:"Quitar archivos seleccionados", cancelLabel:"Cancelar", cancelTitle:"Abortar la subida en curso", uploadLabel:"Subir archivo", uploadTitle:"Subir archivos seleccionados", msgSizeTooLarge:'Archivo "{name}" (<b>{size} KB</b>) excede el tama&iacute;o m&aacute;ximo permitido de <b>{maxSize} KB</b>. Por favor, int&iacute;ntelo de nuevo con archivos mas peque&iacute;os.', msgFilesTooLess:"Debe seleccionar al menos <b>{n}</b> {files} a cargar. Por favor, int&iacute;ntelo de nuevo.", msgFilesTooMany:"El n&uacute;mero de archivos seleccionados a cargar <b>({n})</b> excede el l&iacute;mite m&aacute;ximo permitido de <b>{m}</b>. Por favor, int&iacute;ntelo de nuevo.", msgFileNotFound:'Archivo "{name}" no encontrado.', msgFileSecured:'No es posible acceder al archivo "{name}" porque estar&aacute; siendo usado por otra aplicaci&oacute;n o no tengamos permisos de lectura.', msgFileNotReadable:'No es posible acceder al archivo "{name}".', msgFilePreviewAborted:'Previsualizaci&oacute;n del archivo "{name}" cancelada.', msgFilePreviewError:'Ocurri&oacute; un error mientras se le&iacute;a el archivo "{name}".', msgInvalidFileType:'Tipo de archivo no v&aacute;lido para "{name}". S&oacute;lo archivos "{types}" son permitidos.', msgInvalidFileExtension:'Extensi&oacute;n de archivo no v&aacute;lido para "{name}". S&oacute;lo archivos "{extensions}" son permitidos.', msgValidationError:"Error al subir archivo", msgLoading:"Subiendo archivo {index} de {files} &hellip;", msgProgress:"Subiendo archivo {index} de {files} - {name} - {percent}% completado.", msgSelected:"{n} {files} seleccionado(s)", msgFoldersNotAllowed:"Arrastre y suelte &uacute;nicamente archivos. Omitida(s) {n} carpeta(s).", msgImageWidthSmall:'El ancho de la imagen "{name}" debe ser al menos {size} px.', msgImageHeightSmall:'La altura de la imagen "{name}" debe ser al menos {size} px.', msgImageWidthLarge:'El ancho de la imagen "{name}" no puede exceder de {size} px.', msgImageHeightLarge:'La altura de la imagen "{name}" no puede exceder de {size} px.', dropZoneTitle:"Arrastre y suelte aqu&iacute; los archivos &hellip;"}})(window.jQuery);